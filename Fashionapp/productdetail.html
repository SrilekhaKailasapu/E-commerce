<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail</title>
    <link rel="stylesheet" href="assets/styles/home.css" />
    <link rel="stylesheet" href="assets/styles/productdetail.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://kit.fontawesome.com/f6dcf461c1.js" crossorigin="anonymous"></script>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">
      <a href="index.html">Fashion App</a>
    </div>
    <ul class="navbar-nav">
      <li class="nav-item"><a href="index.html">Home</a></li>
      <li class="nav-item"><a href="shop.html?categ=men_all">Men</a></li>
      <li class="nav-item"><a href="shop.html?categ=ladies_all">Women</a></li>
      <li class="nav-item"><a href="shop.html?categ=kids_all">Kids</a></li>
    </ul>
    <div class="navbar-icons">
      <label>
        <div class="searchcont">
          <div class="imgcont">
            <img width="24" height="24" src="assets/icons/icon-search.png" alt="search" />
          </div>
          <input placeholder="Search" class="inptext" value="" />
        </div>
      </label>
      <div class="icons">
        <div class="icon-item">
          <a href="wishlist.html">
            <img width="20" height="20" src="https://img.icons8.com/ios/50/like--v1.png" alt="like--v1" />
          </a>
        </div>
        <div class="icon-item">
          <a href="cart.html">
            <img width="20" height="20" src="https://img.icons8.com/fluency-systems-regular/50/shopping-cart--v1.png" alt="shopping-cart--v1" />
          </a>
        </div>
        <div class="icon-item">
          <a href="recentorders.html">
            <img width="20" height="20" src="https://img.icons8.com/ios/50/delivery--v1.png" alt="delivery--v1"/>
          </a>
        </div>
        <div class="icon-item">
          <a href="">
            <img width="20" height="20" src="https://img.icons8.com/ios/50/enter-2.png" alt="enter-2" />
          </a>
        </div>
      </div>
    </div>
  </nav>
      <div class="supercontainer">
        <div class="subsuper-container">
            <div class="content">
                <div class="images" id="imageContainer">
            
                </div>
            </div>
          
          <div class="price">
            <Button onclick="Toggle1()" id="btnh1" class="btn"><i class="fas fa-heart"></i></Button>
            <div class="product-detail-container">
                <div class="product-info">
                    <h1 id="productName"></h1>
                    <p class="product-price" id="productPrice"></p>
                    <p id="productDescription"></p>
                    <p style="font-weight: 600;color: #8e8f8f;">Delivery in 2-7 days</p>
                    
                    <!-- <h3>Select color</h3> -->
    <!-- <div class="color-options">
      <div class="color-item">
        <div class="outer-circle"></div>
        <div class="inner-circle" style="background-color: rgb(57, 83, 180);"></div>
      </div>
      <div class="color-item">
        <div class="outer-circle"></div>
        <div class="inner-circle" style="background-color: rgb(211, 36, 36);"></div>
      </div>
      <div class="color-item">
        <div class="outer-circle"></div>
        <div class="inner-circle" style="background-color: black;"></div>
      </div>
    </div> -->

    <h3>Select size</h3>
    <div class="size-options">
      <div class="size-item" onclick="selectSize(element)" data-size="XS">
        <div class="inner-size-box"></div>
        <div class="size-text">XS</div>
      </div>
      <div class="size-item" onclick="selectSize(element)" data-size="S">
        <div class="inner-size-box"></div>
        <div class="size-text">S</div>
      </div>
      <div class="size-item" onclick="selectSize(element)" data-size="M">
        <div class="inner-size-box"></div>
        <div class="size-text">M</div>
      </div>
      <div class="size-item" onclick="selectSize(element)" data-size="L">
        <div class="inner-size-box"></div>
        <div class="size-text">L</div>
      </div>
      <div class="size-item" onclick="selectSize(element)" data-size="XL">
        <div class="inner-size-box"></div>
        <div class="size-text">XL</div>
      </div>
    </div>
    <div style="display: flex;flex-direction: row;padding: 5px;">
      <div class="iconitem">
        <img width="24" height="24" src="https://img.icons8.com/forma-light/24/marker.png" alt="marker"/>
    </div>
      <input type="text" placeholder="pincode" style="border-right:none;border-left: none;border-top: none; padding: 10px;font-size: 18px;display: flex;">
    </div>
    <div id="addtocart"><p id="addtocart-text">ADD TO CART</p></div>
        </div>
      </div>
          </div>
        </div>
    </div>
    <h2 class="category-head" style="margin-left:-20px ;">Recommended for You</h2>
    <div class="trending">
      <div class="trending-item">
        <div class="trending-item-img" style='background-image: url("assets/images/summerdresses.png");'></div>
        <div>
          <p class="info-text">Colorful summer dresses</p>
          <p class="price-text">₹3000+</p>
        </div>
      </div>
      <div class="trending-item">
        <div class="trending-item-img" style='background-image: url("assets/images/sunglasses.png");'></div>
        <div>
          <p class="info-text">Vintage sunglasses</p>
          <p class="price-text">₹3000+</p>
        </div>
      </div>
      <div class="trending-item">
        <div class="trending-item-img" style='background-image: url("assets/images/sandals.png");'></div>
        <div>
          <p class="info-text">Beach ready sandals</p>
          <p class="price-text">₹3000+</p>
        </div>
      </div>
      <div class="trending-item">
        <div class="trending-item-img" style='background-image: url("assets/images/graphictees.png");'></div>
        <div>
          <p class="info-text">Graphic tees</p>
          <p class="price-text">₹3000+</p>
        </div>
      </div>
    </div>
    <footer class="footer">
        <div class="containerf">
            <div class="row">
                <div class="footer-col">
                    <h4>Navigation</h4>
                    <ul>
                        <li><a href="">Home</a></li>
                        <li><a href="">Men</a></li>
                        <li><a href="">Women</a></li>
                        <li><a href="">Kids</a></li>
                        <li><a href="">Beauty</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact us</h4>
                    <ul>
                        <li><a>+91 xxxxx xxxxx</a></li>
                        <li><a>+91 xxxxx xxxxx</a></li>
                        <li><a>+91 xxxxx xxxxx</a></li>
                        <li><a>+91 xxxxx xxxxx</a></li>
                        <li><a>+91 xxxxx xxxxx</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Our Stores</h4>
                    <ul>
                        <li><a style="text-transform:none;">Vijayawada</a></li>
                        <li><a style="text-transform:none;">Hyderabad</a></li>
                        <li><a style="text-transform:none;">Vishakapatnam</a></li>
                        <li><a style="text-transform:none;">Chennai</a></li>
                        <li><a style="text-transform:none;">Bengaluru</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Follow us</h4>
                    <div class="social-links">
                        <a href=""><i class="fab fa-facebook-f"></i></a>
                        <a href=""><i class="fab fa-twitter"></i></a>
                        <a href=""><i class="fab fa-instagram"></i></a>
                        <a href=""><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
<script>
  var wishlist = document.getElementById('btnh1');
  var addtocart = document.getElementById('addtocart');
  var addtocarttext = document.getElementById('addtocart-text');
  var obj=JSON.parse(localStorage.getItem("item"));

  addtocart.addEventListener('click', AddtoCart);
  function addTocart(item) {
    let cart = JSON.parse(localStorage.getItem('cart')) || {};
    const newKey = Object.keys(cart).length;
    // console.log(item.articleCodes[0]);
    cart[newKey] = item;
    localStorage.setItem('cart', JSON.stringify(cart));
}

function removefrmcart(item) {
    let cart = JSON.parse(localStorage.getItem('cart')) || {};
    // console.log(item.articleCodes[0]);
    for (const key in cart) {
      if (cart[key] === item) {
            delete cart[key];
            break;
        }
    }
    let reindexedcart = {};
    let newIndex = 0;
    for (const key in cart) {
        reindexedcart[newIndex++] = cart[key];
    }
    localStorage.setItem('cart', JSON.stringify(reindexedcart));
}
function selectSize(element) {
  // Clear previous selection
  document.querySelectorAll('.size-item').forEach(item => item.classList.remove('selected'));
  // Highlight selected size
  element.classList.add('selected');
  // Store the selected size
  selectedSize = element.getAttribute('data-size');
}
  function AddtoCart(){
    const addtocarttext = document.getElementById("addtocart-text");
  if (!selectedSize) {
    alert("Please select a size before adding to cart.");
    return;
  }
  
  if (addtocarttext.innerHTML === "ADD TO CART") {
    addtocarttext.innerHTML = "REMOVE ITEM";
    addTocart(obj);
  } else {
    addtocarttext.innerHTML = "ADD TO CART";
    removefrmcart(obj);
  }
  }
  function Toggle1(){
          if (wishlist.style.color =="red") {
            wishlist.style.color = "lightgrey"
            removeFromWishlist(obj);
          }
          else{
            wishlist.style.color = "red"
            addToWishlist(obj);
          }
  }
function addToWishlist(item) {
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || {};
    const newKey = Object.keys(wishlist).length;
    // console.log(item.articleCodes[0]);
    wishlist[newKey] = JSON.stringify(item);
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
}

function removeFromWishlist(item) {
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || {};
    // console.log(item.articleCodes[0]);
    for (const key in wishlist) {
      if (wishlist[key] === JSON.stringify(item)) {
            delete wishlist[key];
            break;
        }
    }
    let reindexedWishlist = {};
    let newIndex = 0;
    for (const key in wishlist) {
        reindexedWishlist[newIndex++] = wishlist[key];
    }
    localStorage.setItem('wishlist', JSON.stringify(reindexedWishlist));
}


    async function fetchProductDetails(productCode) {
        const url = `https://apidojo-hm-hennes-mauritz-v1.p.rapidapi.com/products/detail?lang=en&country=in&productcode=${productCode}`;
        const options = {
          method: 'GET',
          headers: {
              'x-rapidapi-key': 'a535860cbcmshc5edf28f91570ecp177c5djsnc6bb3fdf3002',
              'x-rapidapi-host': 'apidojo-hm-hennes-mauritz-v1.p.rapidapi.com'
          }
      };

        try {
            const response = await fetch(url, options);
            const data = await response.json();
            displayProductDetails(data);
            // console.log(data);
        } catch (error) {
            // console.error('Error fetching product details:', error);
        }
    }
    const colorItems = document.querySelectorAll('.color-item');
    let selectedColor = null;

    colorItems.forEach(item => {
      item.addEventListener('click', function() {
        if (item.classList.contains('selected')) {
          item.classList.remove('selected');
          selectedColor = null;
        } else {
          colorItems.forEach(i => i.classList.remove('selected'));
          item.classList.add('selected');
          selectedColor = item.querySelector('div:last-child').style.backgroundColor;
        }
      });
    });

    const sizeItems = document.querySelectorAll('.size-item');
    let selectedSize = null;
    sizeItems.forEach(item => {
      item.addEventListener('click', function() {
        if (item.classList.contains('selected')) {
          item.classList.remove('selected');
          selectedSize = null;
        } else {
          sizeItems.forEach(i => i.classList.remove('selected'));
          item.classList.add('selected');
          selectedSize = item.querySelector('.size-text').textContent;
        }
      });
    });


    function displayProductDetails(data) {
        lcldata=localStorage.getItem("item");
        product=JSON.parse(lcldata)
        // console.log(product);
        document.getElementById('productName').textContent = product.name;
        document.getElementById('productDescription').textContent = data.product.description;
        const imgcont = document.getElementById('imageContainer');

        product.allArticleImages.forEach(image => {
            const div = document.createElement('div');
            div.className = 'imageItem';
            const imgElement = document.createElement('img');
            console.log(image);
            imgElement.src = image; 
            imgElement.alt = 'Product image'; 
            div.appendChild(imgElement);
            imgcont.appendChild(div);
        });
        document.getElementById('productPrice').textContent = `₹${product.price.value}`;
    }
    const urlParams = new URLSearchParams(window.location.search);
    const productCode = urlParams.get('id');

    if (productCode) {
        fetchProductDetails(productCode);
    } else {
        // console.error('No product code found in URL');
    }
</script>

</body>
</html>